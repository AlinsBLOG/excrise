<wxs src="../template/common.wxs" module="text" />
<import src='../template/template.wxml' />

<view class="container">
  <view class="cate-nav">
    <scroll-view 
      scroll-x="true" 
      class="cate-nav-body" 
      style="width: 750rpx;" 
      scroll-left="{{scrollLeft}}">
        <view  
          wx:for="{{navList}}"
          wx:key="{{index}}"
          class="item {{ condCode == item.id ? 'active' : ''}}" 
          data-id="{{item.id}}" 
          data-index="{{index}}" 
          bindtap="switchCate"
        >
            <view class="name">{{item.name}}</view>
        </view>
    </scroll-view>
  </view>

  <scroll-view 
    scroll-y="true" 
    scroll-top="{{scrollTop}}" 
    bindscrolltolower="bindDownLoad" 
    style="height:1128rpx;"
    class='list'>
    <view 
      wx:for='{{orderList}}'
      wx:key='{{index}}'
      bindtap='queryOrderDetail'
      data-order-id='{{item.orderId}}'
      >
      <view 
        class='serviceInfo'
        >
        <view class='serviceTitle'>
          <!-- <text class='service'>服务商</text> -->
          <text class='name'>服务单号：{{item.orderNo}}</text>
          <!-- <text class='level'>Lv7</text> -->
          <text class='state'>{{
          (item.state==1?'待对接':(item.state==10?'正在服务':(item.state==99?'服务结束':'')))
          }}</text>
        </view>
      </view>
      <view>
        <view 
          class='serviceCenter'
        >
          <view class='left'>
            <text class='service'>服务商</text>
            <text class='name'>{{item.providerFullName}}</text>
            <text class='title'>{{item.serviceName}}</text>
            <view>
              <text class='area'>服务地区：{{item.countyName}}</text>
              <text class='date'>服务期限：{{item.durationName}}</text>
            </view>
          </view>
          <!-- <text class='right'>
            ￥ {{text.formatPrice(item.orderPrice)}}
            <text class='amount'>x{{item.quantity}}</text>
          </text> -->
        </view>
        <view class='serviceBottom'>
          <view class='actPay'>
          {{item.bargainMethod == 'YKJ0'?('购买总额：￥'+text.formatPrice(item.sumAmount)):''}}
          {{
            item.bargainMethod == 'XSYJ'
            ?
            (!item.bargainAmount ? '已付订金':'')
            :
            (item.bargainAmount && '购买总额：￥'+text.formatPrice(item.sumAmount)+'(订金)￥'+text.formatPrice(item.depositAmount)+'(补充)￥'+text.formatPrice(item.bargainAmount))
            }}
        </view> 
        </view>
      </view>
    </view>
    <view  wx:if='{{!orderList.length}}' class='serviceInfo' style='text-align:center'>
      暂无服务单
    </view>
  </scroll-view>
</view>