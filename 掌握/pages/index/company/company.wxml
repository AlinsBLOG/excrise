<loading hidden="{{!showLoading}}">正在加载</loading>
<!-- 遮罩层 -->

 <!-- <view class="ml10 mt10 orange f16 p14" style="font-weight:600" wx:if="{{isTied == false || identity == 0}}">
                   登录验证可见
                </view>

                <view class="ml10 mt10 orange f16 p14" style="font-weight:600" wx:if="{{isTied == true && identity != 0}}">
                    ￥{{item.nowprice}}
                    <text class="f12 gray oldPrice" wx:if="{{item.retail_price && item.retail_price != item.nowprice}}">￥{{item.retail_price}}</text>
                </view>
=+++++++++ -->
<scroll-view class="body" scroll-y="{{isScroll}}" scroll-top="{{scrollTop}}" scroll-with-animation="{{true}}" bindscrolltolower="getMoreList" bindscrolltoupper="returnTop" bindscroll="containerScroll" wx:if="{{!showLoading}}">
    <!-- 绑定手机号弹窗 -->
    <view class="tieForm pf" wx:if="{{isTieUp}}">
        <view class="mask4" bindtap="goback"></view>
        <form class="pa bgf" action="">
            <image class="pa back" bindtap="goback" src="/images/icons/me/close.png"></image>
            <text class="f14">绑定手机号</text>
            <view class="inputCase">
                <text class="db fl f12 pl25">手机号</text>
                <input class="fl f12 pl25" bindinput="inputPhoneNum" placeholder="请输入手机号码" type="number" maxlength="11" auto-focus name="phone" />
            </view>
            <view class="inputCase code">
                <text class="db fl f12 pl25">验证码</text>
                <input class="fl f12 pl25" maxlength="6" bindinput="inputCodeNum" type="number" placeholder="短信验证码" name="addCode" />
                <button disabled='{{disabled}}' class="tc fl f10 pa white" catchtap="formSubmit">{{time}}</button>
            </view>
            <button class="subbtn submit pa tc f14 white" type="primary" catchtap="verify">确认</button>
        </form>
    </view>
    <!-- 2018-09-04添加的 店铺搜索 -->
    <form wx:if="{{!showLoading}}">
        <view class="search pf bgf " style='display:flex;'>
            <!-- 搜索列表 -->
            <view style='flex:1' bindtap="goCSearch">
                <input type="text" name="key" class="f12 tc" style='height:54rpx' bindinput="inputSearch" placeholder="搜索本店产品" disabled/>
                <image class="db pa searchIcon" src="/images/icons/index/search.png"></image>
            </view>
        </view>
    </form>
    <view class="view_height" id='mjltest'>
        <!-- 商家信息 -->
        <view class="img_bg">
            <image mode="widthFix" src="{{companyData.img_bg}}" style="width:100%;"></image>
        </view>
        <view class="supply_company bb pr bgf" >
            <image class="company_logo db fl pa" src="{{companyData.img_logo}}"></image>
            <view class="company_nav pa">
                <view class="supply_title f13 black">{{companyData.title}}</view>
                <view class="f11 textoh black">在售商品
                    <text class="orange">{{companyData.goods_count}}</text>件/已浏览
                    <text class="orange">{{companyData.browse}}</text>次</view>
            </view>
            <view class="collect f10 pa {{isCollect?'orange':''}}" catchtap="collect">
                <image class="pa" src="/images/icons/details/{{isCollect?'collected':'collect'}}.png"></image> 收藏</view>
        </view>
        <view class="content f12 bgf pr {{isHidden?'text_hidden':''}}" catchtap="showText">
            {{companyData.c_content}}
        </view>
        <view class="fold bgf pr mb20" catchtap="showText">
            <image class="pa" src="/images/icons/company/{{isHidden?'unfold':'upfold'}}.png"></image>
        </view>
        <!-- 轮播图 -->
        <view class="swiper bgf" wx:if="{{resData.banner.length !=0}}">
            <swiper indicator-dots="{{false}}" autoplay="{{true}}" interval="{{5000}}" duration="{{500}}" circular="{{true}}" bindchange="bannerChange">
                <block wx:for="{{resData.banner}}" wx:key="{{index}}">
                    <swiper-item class="banner">
                        <image src="{{item.img}}" class="slide-image" bindtap="goTo" id="{{item.jump}}" data-text="{{item.goto}}" data-index="{{index}}" />
                    </swiper-item>
                </block>
            </swiper>
            <view class="dots">
                <view class="dot {{bannerIndex==index?'bannerAct':''}}" wx:for="{{resData.banner}}" wx:key="{{index}}"></view>
            </view>
        </view>
        <!-- 热销 -->
        <!-- {{isTied}}
        {{identity}}         -->
        <view class="hotsale_title f12 pr">
            <view class="border orange pa f12">|</view>热销</view>
        <scroll-view class="supply_goods mb20 bgf" scroll-x="{{isScroll}}">
            <view class="pl25 df">
                <view class="supply_goodsbox" wx:for="{{resData.hotsale}}" wx:key="{{index}}" data-text="{{item}}" catchtap="goDetails">
                    <view class="supply_goodsimage">
                        <image src="{{item.img_show}}"></image>
                    </view>
                    <view class="supply_goodsname textoh2 f12 mt10 fow" style="line-height:34rpx">{{item.title}}</view>
                    <!-- {{isTied}} -->
                    <!-- {{isTied == false || identity == 0}} -->
                    <!-- {{isTied == true && identity != 0}} -->
                    <!-- {{isTied == true && identity != 0}} -->
                    <!-- {{item.retail_price && item.retail_price != item.nowprice && (isTied == true && identity != 0)}} -->
                    <view class='tc f12 orange mt10 fow' wx:if="{{isTied == false || identity == 0}}" >登录验证可见</view>

                     <view class="tc f12 orange mt10 fow" wx:if="{{isTied == true && identity != 0}}">￥{{item.nowprice}}</view>

                    <view class="tc f12 gray oldPrice fow" wx:if="{{item.retail_price && item.retail_price != item.nowprice && (isTied == true && identity != 0)}}">￥{{item.retail_price}}</view>
                   
                </view>
            </view>
        </scroll-view>
    </view>

    <!-- 弹窗菜单 -->
    <!-- " {{fix ? 'modalBox' : ''   }}" -->
    <!-- " {{ fix ? 'modalBox' : '' }}" -->
    <view class='{{filValue != 0 ? "maskbg" : ""  }} ' bindtap='closeMask'>
        <view class=" {{ fix ? 'modalBox' : '' }}">

            <!-- 排序 -->
            <view id="optionsBox" class="options bgf flex-row " style="z-index:1000;">
                <view class="select {{selectValue == 1 ? 'orange' : ''}}" catchtap="select1">人气</view>
                <view class="select {{selectValue == 2 ? 'orange' : ''}}" catchtap="select2">销量</view>
                <view class="select {{selectValue == 3 ? 'orange' : ''}}" catchtap="select3">新品</view>
                <view class="select pr {{selectValue > 3 ? 'orange' : ''}}" catchtap="select45">
                    价格
                    <view class="sort desc {{selectValue == 4 ? 'desc_active' : ''}}"></view>
                    <view class="sort asc {{selectValue == 5 ? 'asc_active' : ''}}"></view>
                </view>
            </view>
            <!-- 筛选 -->
            <view class="options bgf">
                <view class="filtrate fl f12 " catchtap="toggleFiltrate">{{name2 }}</view>
            </view>
            <!-- 产品类型 -->
            <view class='typeBox {{ filValue == 2 ? "db" :"dn" }}'>
                <scroll-view class="goodsType pa bgf" scroll-y>
                    <view wx:for="{{ typeList }}" wx:key="{{index}}" class="ulLis bgf f12 tl fow {{nextType==item.id?'orange':''}}" catchtap="toggleNextType" data-children="{{item.children}}" data-id="{{item.id}}" data-text="{{item.name}}">
                        {{item.name}}
                    </view>
                </scroll-view>
                <scroll-view class="nextType pa bgf" scroll-y>
                    <view wx:for="{{ nexTypeList }}" wx:key="{{index}}" class="ulLis bgf f12 tl fow {{type==item.id?'orange':''}}" catchtap="changeType" id="{{item.id}}" data-text="{{item.name}}">
                        {{item.name }}
                    </view>
                </scroll-view>
            </view>
        </view>
    </view>
    <!-- 格子布局 -->
    <view class="waterfal oh pb6">
        <view class="waterfall_box">
            <view class="waterfall_goods pr" wx:for="{{ cGoodsData }}" wx:key="{{index}}" data-text="{{item}}" catchtap="goDetails">
                <view class="waterfall_img">
                    <image src="{{item.img_show}}"></image>
                </view>
                <view class="ml10 mt10 f28 textoh2 p15 fow" style="height:76rpx;line-height:38rpx">
                    <text class="rec_company_label white f10" wx:for="{{item.company_label}}" wx:key="{{index}}">{{item}}</text> {{item.title}}</view>
                <view class="rec_goodstip p15">
                    <!-- 优惠XX元 -->
                    <text class="rec_goods_label f10 fow" wx:if="{{item.disparity != 0}}" wx:key="{{index}}">优惠{{item.disparity}}元</text>
                    <!-- 商品标签 -->
                    <text class="rec_goods_label f10" wx:for="{{item.goods_label}}" wx:key="{{index}}">{{item}}</text>
                </view>
                <!-- wx:if="{{isTied == false || identity == 0}}" -->
                <view class="ml10 mt10 orange f16 p14 fow"  wx:if="{{isTied == false || identity == 0}}">登录验证可见</view>
                <view class="ml10 mt10 orange f16 p14 fow" wx:if="{{isTied == true && identity != 0}}">
                    ￥{{item.nowprice}}
                    <text class="f12 gray oldPrice fow" wx:if="{{item.retail_price && item.retail_price != item.nowprice}}">￥{{item.retail_price}}</text>
                </view>
                <view class="rec_company f10 gray pl10 pr">
                    <view class="textoh" style="width:70%;">{{item.company_title}}</view>
                    <view class="pa" style="right:20rpx;bottom:0;">{{item.s_city}}</view>
                </view>
            </view>
        </view>
    </view>
    <view>
        <view class="page-loading" wx:if="{{showMore==0}}">点击或上拉加载更多</view>
        <view class="page-loading" wx:if="{{showMore==1}}">
            <image src="/images/loading.gif"></image>
            玩命加载中...
        </view>
        <view class="page-loading" wx:if="{{showMore==2}}">已经到底啦</view>
    </view>
    <!-- 分享 -->
    <button class="share pf" catchtap="" open-type='share'>
        <image class="db pa" src="/images/icons/me/share.png"></image>
        <text class="f10 db pa tc">分享</text>
    </button>
    <!-- 找客服 -->
    <!-- <button class="service pf" open-type='contact' session-from="weapp" send-message-title="{{companyData.title}}" send-message-path="{{'/pages/index/company/company?id='+companyData.id+'&title='+companyData.title}}" send-message-img="{{companyData.img_logo}}"
        show-message-card="true">
        <image class="db pa" src="/images/icons/details/service.png"></image>
        <text class="f10 db pa tc">找客服</text>
    </button> -->
    <button class="service pf" bindtap='goContact'>
        <image class="db pa" src="/images/icons/details/service.png"></image>
        <text class="f10 db pa tc">找客服</text>
    </button>
    <!-- bindtap='goContact' data-title="{{goodsData.title}}" data-price="{{goodsData.nowprice}} " data-img="{{goodsData.img_imgs[0]}}" -->
    <view class="service_green pf" animation="{{animation}}">
        <image class="db pa" src="/images/icons/details/green.png"></image>
        <text class="f13 db pa tc">欢迎光临，有问题记得来问我哦</text>
    </view>
    <!-- 回到顶部 -->
    <view class="returnTop bgf pf" wx:if="{{showReturn}}" catchtap="returnTop">
        <image class="return_img db" src="/images/icons/index/top.png"></image>
        <view class="tc f8">顶部</view>
    </view>
</scroll-view>